

Terminator = CR;

getIDN {
    out "IDN";
    in "%39c";
}

startCounting {
    out "STR";
}

stopCounting {
    out "STP";
}

getCounts {
    out "XMT";
    # Responds with value, units
    in "%d, %(\$1)39c";
}

resetCounts {
    out "RES";
}

setArmed {
    out "AR%d";
}

setGated {
    out "GT%d";
}

setHold {
    out "DH%d";
}

setOffset {
    out "OF%d";
}

setTrigger {
    out "TRG";
}

getGateTime {
    out "SMT?";
    in "%d";
}

setGateTime {
    out "SMT%d";
}

setPulsePerRev {
    out "NPC%d";
}

getFunction {
    out "FN?";
    in "%s";
}

setFunction { 
    #todo check this works - can we just send str val of mbbo?
    out "%s";
}

setPulsePerRev {
    out "NPC%d";
}

# These take a channel (A/B)
getTriggerLevel {
    out "LV\$1?";
    in "%d";
}

getChannelSettings {
    out "M\$1";
    #TODO check attenuator is definitely correct
    # \$1 is $(P):CHAN_X
    in "Z:%#(\$1:IMPEDANCE){50=0|1 M=1} CPL:%(\$1:COUPLING)2c FL:%(\$1:LOWPASSFILTER)b ATT:%#(\$1:ATTENUATOR){1=0|2=10|3=100} SLP%#(\$1:SLOPE){+=0|-=1}";
}

getImpedance {
    out "M\$1";
    in "Z:%2d";
    # Ignore the rest, we don't care if just getting impedance
    Extrainput = ignore;
}


setTriggerLevel {
    out "LV\$1%f";
}

setImpedance {
    out "O\$1%{L|H}";
}

setCoupling {
    # eg DCA, ACB 
    out "%s\$1";
}

setLowPassFilter {
    out "F\$1%d";
}

setAttenuator {
    #TODO check this - manual seems weird for this one as RBV is different
    out "A\$1%{0|1|2}";
}

setSlope {
    out "S\$1%{0|1}";
}
